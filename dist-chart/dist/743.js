"use strict";(globalThis.webpackChunk_openmrs_esm_patient_chart_app=globalThis.webpackChunk_openmrs_esm_patient_chart_app||[]).push([[743],{8139:(t,i,e)=>{e.d(i,{Z:()=>r});var n=e(272),l=e.n(n),s=e(2609),o=e.n(s)()(l());o.push([t.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-patient-chart__cancel-visit-dialog__bodyShort02___e5GxJ{font-size:var(--cds-body-compact-02-font-size, 1rem);font-weight:var(--cds-body-compact-02-font-weight, 400);line-height:var(--cds-body-compact-02-line-height, 1.375);letter-spacing:var(--cds-body-compact-02-letter-spacing, 0);color:#161616}","",{version:3,sources:["webpack://./../../node_modules/@openmrs/esm-styleguide/src/_vars.scss","webpack://./src/visit/visit-prompt/cancel-visit-dialog.scss","webpack://./../../node_modules/@carbon/type/scss/_styles.scss"],names:[],mappings:"AAoDA,MACE,mBAAA,CACA,mBAAA,CACA,mBAAA,CCpDF,8DC+1BI,oDAAA,CAAA,uDAAA,CAAA,yDAAA,CAAA,2DAAA,CD71BF,aDDM",sourceRoot:""}]),o.locals={bodyShort02:"-esm-patient-chart__cancel-visit-dialog__bodyShort02___e5GxJ"};const r=o},4455:(t,i,e)=>{e.d(i,{l:()=>a});var n=e(2870),l=e(5968),s=e(4924),o=e(268);function r(t,i){(null==i||i>t.length)&&(i=t.length);for(var e=0,n=new Array(i);e<i;e++)n[e]=t[e];return n}function a(t,i){var e,a,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},d=(0,l.Tn)(t).mutateVisits,v=(0,n.useVisit)(t).mutate,p=(e=(0,o.useState)(!1),a=2,function(t){if(Array.isArray(t))return t}(e)||function(t,i){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,l,s=[],o=!0,r=!1;try{for(e=e.call(t);!(o=(n=e.next()).done)&&(s.push(n.value),!i||s.length!==i);o=!0);}catch(t){r=!0,l=t}finally{try{o||null==e.return||e.return()}finally{if(r)throw l}}return s}}(e,a)||function(t,i){if(t){if("string"==typeof t)return r(t,i);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(e):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?r(t,i):void 0}}(e,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),y=p[0],A=p[1],m=(0,s.useTranslation)().t,h=function(){(0,l.rP)(null==i?void 0:i.uuid).then((function(){var t,e;(0,n.showSnackbar)({title:m("visitRestored","Visit restored"),subtitle:m("visitRestoredSuccessfully","{{visit}} restored successfully",{visit:null!==(e=null==i||null===(t=i.visitType)||void 0===t?void 0:t.display)&&void 0!==e?e:m("visit","Visit")}),kind:"success"}),d(),v(),null==u||u()})).catch((function(){var t,e;(0,n.showSnackbar)({title:m("visitNotRestored","Visit couldn't be restored"),subtitle:m("errorWhenRestoringVisit","Error occured when restoring {{visit}}",{visit:null!==(e=null==i||null===(t=i.visitType)||void 0===t?void 0:t.display)&&void 0!==e?e:m("visit","Visit")}),kind:"error"})}))};return{initiateDeletingVisit:function(){A(!0);var t=!(null==i?void 0:i.stopDatetime);(0,l.u4)(null==i?void 0:i.uuid).then((function(){var e,l,s,o,r,a;d(),v(),(0,n.showActionableNotification)({title:t?m("visitCancelled","Visit cancelled"):m("visitDeleted","{{visit}} deleted",{visit:null!==(o=null==i||null===(e=i.visitType)||void 0===e?void 0:e.display)&&void 0!==o?o:m("visit","Visit")}),kind:"success",subtitle:t?m("visitCancelSuccessMessage","Active {{visit}} cancelled successfully",{visit:null!==(a=null==i||null===(s=i.visitType)||void 0===s?void 0:s.display)&&void 0!==a?a:m("visit","Visit")}):m("visitDeletedSuccessfully","{{visit}} deleted successfully",{visit:null!==(r=null==i||null===(l=i.visitType)||void 0===l?void 0:l.display)&&void 0!==r?r:m("visit","Visit")}),actionButtonLabel:m("undo","Undo"),onActionButtonClick:h}),null==c||c()})).catch((function(){(0,n.showSnackbar)({title:t?m("errorCancellingVisit","Error cancelling active visit"):m("errorDeletingVisit","Error deleting visit"),kind:"error",subtitle:m("errorOccuredDeletingVisit","An error occured when deleting visit")})})).finally((function(){A(!1)}))},isDeletingVisit:y}}},7743:(t,i,e)=>{e.r(i),e.d(i,{default:()=>D});var n=e(268),l=e.n(n),s=e(4924),o=e(4350),r=e(2870),a=e(4100),c=e(4994),u=e(321),d=e.n(u),v=e(1195),p=e.n(v),y=e(3275),A=e.n(y),m=e(7162),h=e.n(m),f=e(2094),b=e.n(f),g=e(757),C=e.n(g),_=e(8139),V={};V.styleTagTransform=C(),V.setAttributes=h(),V.insert=A().bind(null,"head"),V.domAPI=p(),V.insertStyleElement=b(),d()(_.Z,V);const k=_.Z&&_.Z.locals?_.Z.locals:void 0;var w=e(4455);const D=function(t){var i=t.patientUuid,e=t.closeModal,u=(0,s.useTranslation)().t,d=(0,r.useVisit)(i).currentVisit,v=(0,c.t)(i,null==d?void 0:d.uuid),p=(0,n.useCallback)((function(){var t=null==v?void 0:v.queueEntry;t&&(0,a.Ls)(t.queueUuid,t.queueEntryUuid,new AbortController),e()}),[]),y=(0,w.l)(i,d,p),A=y.initiateDeletingVisit,m=y.isDeletingVisit;return l().createElement("div",null,l().createElement(o.ModalHeader,{closeModal:e,title:u("cancelActiveVisitConfirmation","Are you sure you want to cancel this active visit?")}),l().createElement(o.ModalBody,null,l().createElement("p",{className:k.bodyShort02},u("cancelVisitExplainerMessage","Cancelling this visit will delete its associated encounters"),".")),l().createElement(o.ModalFooter,null,l().createElement(o.Button,{kind:"secondary",onClick:e},u("cancel","Cancel")),l().createElement(o.Button,{disabled:m,kind:"danger",onClick:A},m?l().createElement(o.InlineLoading,{description:u("cancellingVisit","Cancelling visit")}):u("cancelVisit","Cancel visit"))))}}}]);